(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{75:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return p})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return u}));var r=n(3),i=n(7),o=(n(0),n(81)),a=["components"],l={title:"A Tutorial of Heuristic Search based Exploration in RISE",sidebar_label:"Tutorial of Heurisitc Search based Exploration"},p={unversionedId:"exploration/tutorial",id:"exploration/tutorial",isDocsHomePage:!1,title:"A Tutorial of Heuristic Search based Exploration in RISE",description:"The Heuristic Search based Exploration allows to automatically optimize a",source:"@site/docs/exploration/tutorial.md",slug:"/exploration/tutorial",permalink:"/exploration/tutorial",version:"current",sidebar_label:"Tutorial of Heurisitc Search based Exploration",sidebar:"docs",previous:{title:"A tutorial of the RISE language, and the Shine compiler",permalink:"/tutorial"},next:{title:"Technical Overview of Heuristic Search based Exploration",permalink:"/exploration/exploration"}},c=[{value:"Overview",id:"overview",children:[]},{value:"Configuration of Exploration Process",id:"configuration-of-exploration-process",children:[]},{value:"Start Exploration Process",id:"start-exploration-process",children:[]},{value:"Output of Exploration Process",id:"output-of-exploration-process",children:[]}],s={toc:c};function u(e){var t=e.components,n=Object(i.a)(e,a);return Object(o.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"The Heuristic Search based Exploration allows to automatically optimize a\n",Object(o.b)("a",{parentName:"p",href:"/tutorial#high-level-program"},"High-Level RISE Program"),"\nby applying rewrite rules (and more generally\n",Object(o.b)("a",{parentName:"p",href:"/tutorial#optimization-strategy"},"ELEVATE Optimization Strategies"),") in an\nexplorative process that is guided by ",Object(o.b)("a",{parentName:"p",href:"/exploration/exploration#heuristic-search-algorithms"},"Heuristic Search Algorithms"),"."),Object(o.b)("h2",{id:"overview"},"Overview"),Object(o.b)("p",null,"In this basic tutorial we walk through an example on how to configure and\nperform an exploration run."),Object(o.b)("p",null,"We start with a definition of a High-Level RISE program for\nmatrix-matrix multiplication:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-scala"},"// input size\nval N = 512\n\n// definition of matrix-matrix multiplication\n// as a high-level program in RISE\nval mm =\n  fun(ArrayType(N, ArrayType(N, f32)))(a =>\n    fun(ArrayType(N, ArrayType(N, f32)))(b =>\n      a |> map(fun(ak =>\n        b |> transpose |> map(fun(bk =>\n          zip(ak)(bk) |>\n            map(fun(x => fst(x) * snd(x))) |>\n            reduce(add)(lf32(0.0f)) )) )) ))\n")),Object(o.b)("p",null,"Our goal is to perform an exploration by applying ELEVATE Optimization Strategies\nto this program in an explorative process guided by Heuristic Search Algorithms.\nFor this we have to configure the exploration process."),Object(o.b)("h2",{id:"configuration-of-exploration-process"},"Configuration of Exploration Process"),Object(o.b)("p",null,"The exploration process is configured with a ",Object(o.b)("inlineCode",{parentName:"p"},"JSON")," configuration file.\nWe show two examples here."),Object(o.b)("h4",{id:"configuration-using-iterative-improvement-search"},"Configuration using Iterative Improvement Search"),Object(o.b)("p",null,"First, a simple example using the iterative improvement\n(aka, iterative refinement, or ",Object(o.b)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Metaheuristic#Local_search_vs._global_search"},"local search"),") heuristic search algorithm.\nWe also specify that we evaluate the performance function ",Object(o.b)("inlineCode",{parentName:"p"},"f")," that guides our\nexploration process by compiling the rewritten program candidate to C and\nexecuting it."),Object(o.b)("p",null,"The corresponding ",Object(o.b)("inlineCode",{parentName:"p"},"JSON")," configuration file\n",Object(o.b)("inlineCode",{parentName:"p"},'"exploration/configuration/mm_example_iterative_improvement.json"'),"\nlooks like this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-json"},'  {\n      "name" : "mm_example_iterative_improvement",\n      "output" : "exploration",\n      "inputSize" : 512,\n      "metaheuristic" : [{\n        "heuristic" : "IterativeImprovement",\n        "depth" : 0,\n        "iterations" : 1\n      }],\n      "executor" : {\n        "name" : "C",\n        "iterations" : 3,\n        "threshold" : 10\n      }\n}\n')),Object(o.b)("h4",{id:"configuration-using-random-search"},"Configuration using Random Search"),Object(o.b)("p",null,"The second example is similar and uses the Random Search Heuristic."),Object(o.b)("p",null,"The corresponding ",Object(o.b)("inlineCode",{parentName:"p"},"JSON")," configuration file\n",Object(o.b)("inlineCode",{parentName:"p"},'"exploration/configuration/mm_example_random.json"'),"\nlooks like this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-json"},'  {\n      "name" : "mm_example_random",\n      "output" : "exploration",\n      "inputSize" : 512,\n      "metaheuristic" : [{\n        "heuristic" : "Random",\n        "depth" : 5,\n        "iterations" : 10\n      }],\n      "executor" : {\n        "name" : "C",\n        "iterations" : 3,\n        "threshold" : 10\n      }\n}\n')),Object(o.b)("h2",{id:"start-exploration-process"},"Start Exploration Process"),Object(o.b)("p",null,"Once we have provided a configuration we can simply start the exploration\nprocess using the ",Object(o.b)("inlineCode",{parentName:"p"},"riseExploration")," function."),Object(o.b)("h4",{id:"perform-exploration-with-iterative-improvement-search"},"Perform Exploration with Iterative Improvement Search"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-scala"},'// run exploration with iterative improvement\nval iterativeImprovementConfig =\n    "exploration/configuration/mm_example_iterative_improvement.json"\nriseExploration(mm, iterativeImprovementConfig)\n')),Object(o.b)("h4",{id:"perform-exploration-with-random-search"},"Perform Exploration with Random Search"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-scala"},'// run exploration with random\nval randomConfig =\n    "exploration/configuration/mm_example_iterative_improvement.json"\nriseExploration(mm, randomConfig)\n')),Object(o.b)("h2",{id:"output-of-exploration-process"},"Output of Exploration Process"),Object(o.b)("p",null,"The exploration process will take a couple of minutes to complete.\nOnce complete, the folder specified as ",Object(o.b)("inlineCode",{parentName:"p"},"output")," in the configuration file\n(in the examples above this is ",Object(o.b)("inlineCode",{parentName:"p"},'"exploration"'),") will contain a new subfolder\ncontaining the results of the exploration process.\nThis subfolder contains:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"a copy of the configuration file used for the exploration"),Object(o.b)("li",{parentName:"ul"},"a subfolder containing the results of every iteration of the Heuristic Search Algorithm",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"A ",Object(o.b)("inlineCode",{parentName:"li"},"csv")," file containing an overview of the runtimes measured for each resulting program (aka, solution)"),Object(o.b)("li",{parentName:"ul"},"A copy of every resulting program (in various forms)"),Object(o.b)("li",{parentName:"ul"},"A ",Object(o.b)("inlineCode",{parentName:"li"},"dot")," file to visualize the exploration procress "),Object(o.b)("li",{parentName:"ul"},"a subfolder containing the results of the executor",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"A ",Object(o.b)("inlineCode",{parentName:"li"},"csv")," file containing the runtimes of every single evaluated program (aka, solution candiate) as part of the exploration process"),Object(o.b)("li",{parentName:"ul"},"A copy of every evaluated program (in various forms)")))))),Object(o.b)("p",null,"This information makes it easy to identify the best found expression, as well\nas producing graphs investigating the exploration process itself. "))}u.isMDXComponent=!0},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}));var r=n(0),i=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=i.a.createContext({}),s=function(e){var t=i.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return i.a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},b=i.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,a=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(n),b=r,f=u["".concat(a,".").concat(b)]||u[b]||m[b]||o;return n?i.a.createElement(f,l(l({ref:t},c),{},{components:n})):i.a.createElement(f,l({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=b;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var c=2;c<o;c++)a[c]=n[c];return i.a.createElement.apply(null,a)}return i.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);